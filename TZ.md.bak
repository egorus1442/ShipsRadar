# –¢–ó: ShipsRadar MVP - –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ—Ä—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

## üéØ –¶–µ–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞
–°–æ–∑–¥–∞—Ç—å MVP –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –º–æ—Ä—Å–∫–∏—Ö —Å—É–¥–æ–≤ —Å —É—á–µ—Ç–æ–º –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (–≤–µ—Ç–µ—Ä, –≤–æ–ª–Ω—ã, —Ç–µ—á–µ–Ω–∏—è) –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ. –ü—Ä–æ–¥—É–∫—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º.

## üîë –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω—è–µ–º
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ–≥–æ–¥—ã (–≤–µ—Ç–µ—Ä, –≤–æ–ª–Ω—ã, —Ç–µ—á–µ–Ω–∏—è)
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã** - –≤—Å—è –∫–∞—Ä—Ç–∞ –º–∏—Ä–∞
- **–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7 –¥–Ω–µ–π** - —É—á–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏

---

## üìä –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

### Frontend
- React 18 + TypeScript
- Mapbox GL JS - –∫–∞—Ä—Ç—ã
- Deck.gl - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–µ–≤ –ø–æ–≥–æ–¥—ã
- Tailwind CSS - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- Vite - —Å–±–æ—Ä–∫–∞

### Backend
- Python 3.11+ + FastAPI
- Pydantic - –≤–∞–ª–∏–¥–∞—Ü–∏—è
- uvicorn - —Å–µ—Ä–≤–µ—Ä

### –ü–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- Open-Meteo Marine Weather API - –≤–µ—Ç–µ—Ä, –≤–æ–ª–Ω—ã, –ø–æ–≥–æ–¥–∞
- NOAA RTOFS / Copernicus Marine - —Ç–µ—á–µ–Ω–∏—è
- Mapbox Geocoding API - –≥–µ–æ–∫–æ–¥–∏–Ω–≥ –∞–¥—Ä–µ—Å–æ–≤

### –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- GeoPy - —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- Shapely - –≥–µ–æ–º–µ—Ç—Ä–∏—è
- NumPy/SciPy - –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- xarray, netCDF4 - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∫–µ–∞–Ω–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Docker + Docker Compose
- PostgreSQL + PostGIS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è v2)

---

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## –≠–¢–ê–ü 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–Ω–µ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- [x] –°–æ–∑–¥–∞—Ç—å `/backend` –ø–∞–ø–∫—É —Å Python –ø—Ä–æ–µ–∫—Ç–æ–º
- [x] –°–æ–∑–¥–∞—Ç—å `/frontend` –ø–∞–ø–∫—É —Å React –ø—Ä–æ–µ–∫—Ç–æ–º
- [x] –î–æ–±–∞–≤–∏—Ç—å `.gitignore` –¥–ª—è Python –∏ Node.js
- [x] –°–æ–∑–¥–∞—Ç—å `README.md` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞

### 1.2 Backend: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FastAPI
- [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Python –ø—Ä–æ–µ–∫—Ç —Å `pyproject.toml` –∏–ª–∏ `requirements.txt`
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å FastAPI, uvicorn, pydantic
- [x] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
  - `main.py` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
  - `api/` - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
  - `services/` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - `models/` - Pydantic –º–æ–¥–µ–ª–∏
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å FastAPI —Å–µ—Ä–≤–µ—Ä –Ω–∞ `localhost:8000`
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é `/docs`

### 1.3 Frontend: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ React
- [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å React –ø—Ä–æ–µ–∫—Ç —Å Vite + TypeScript
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: React, TypeScript
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Tailwind CSS
- [x] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫:
  - `src/components/` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  - `src/services/` - API –∫–ª–∏–µ–Ω—Ç—ã
  - `src/types/` - TypeScript —Ç–∏–ø—ã
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä –Ω–∞ `localhost:5173`
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑–æ–≤—ã–π —Ä–µ–Ω–¥–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 1.4 Docker
- [x] –°–æ–∑–¥–∞—Ç—å `Dockerfile` –¥–ª—è backend
- [x] –°–æ–∑–¥–∞—Ç—å `Dockerfile` –¥–ª—è frontend
- [x] –°–æ–∑–¥–∞—Ç—å `docker-compose.yml` –¥–ª—è –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `docker-compose up`

---

## –≠–¢–ê–ü 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã (–±–∞–∑–æ–≤–∞—è)

### 2.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Mapbox
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ Mapbox, –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `mapbox-gl` –≤ frontend
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `MapView.tsx`
- [ ] –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –±–∞–∑–æ–≤—É—é –∫–∞—Ä—Ç—É –º–∏—Ä–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ–º–Ω—É—é —Ç–µ–º—É –∫–∞—Ä—Ç—ã (–∫–∞–∫ StormGeo)

### 2.2 –ë–∞–∑–æ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–∞—Ä—Ç–æ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—ã (zoom, navigation)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–µ (–ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç—É (—Ç–µ—Å—Ç–æ–≤—ã–µ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å responsive –¥–∏–∑–∞–π–Ω

---

## –≠–¢–ê–ü 3: –í–≤–æ–¥ —Ç–æ—á–µ–∫ A –∏ B

### 3.1 Backend: Geocoding API
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ `LocationRequest`, `LocationResponse` –≤ `models/location.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/geocode` –≤ `api/location.py`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Mapbox Geocoding API
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (—Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã):
  - Decimal: `35.4437, 139.6380`
  - DMS: `35¬∞26'37"N, 139¬∞38'17"E`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å reverse geocoding (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí –Ω–∞–∑–≤–∞–Ω–∏–µ)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API —á–µ—Ä–µ–∑ `/docs`

### 3.2 Frontend: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–≤–æ–¥–∞ –ª–æ–∫–∞—Ü–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `LocationInput.tsx`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤/–ø–æ—Ä—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤–≤–æ–¥–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "Set on map" (–∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–µ)
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RouteInputPanel.tsx`:
  - –ü–æ–ª–µ "Start Point" (A)
  - –ü–æ–ª–µ "End Point" (B)
  - DateTimePicker –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  - –ö–Ω–æ–ø–∫–∞ "Calculate Route"

### 3.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–æ–π
- [ ] –ü—Ä–∏ –≤–≤–æ–¥–µ —Ç–æ—á–∫–∏ A - –ø–æ–∫–∞–∑–∞—Ç—å –º–∞—Ä–∫–µ—Ä –Ω–∞ –∫–∞—Ä—Ç–µ
- [ ] –ü—Ä–∏ –≤–≤–æ–¥–µ —Ç–æ—á–∫–∏ B - –ø–æ–∫–∞–∑–∞—Ç—å –º–∞—Ä–∫–µ—Ä –Ω–∞ –∫–∞—Ä—Ç–µ
- [ ] –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç—É - –∑–∞–ø–æ–ª–Ω–∏—Ç—å input –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UX flow

---

## –≠–¢–ê–ü 4: Weather Service - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 4.1 Backend: Open-Meteo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `httpx` (async HTTP –∫–ª–∏–µ–Ω—Ç)
- [x] –°–æ–∑–¥–∞—Ç—å `services/weather/open_meteo.py`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `fetch_marine_weather()`:
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: lat, lon, start_date, end_date
  - –í–æ–∑–≤—Ä–∞—Ç: –≤–µ—Ç–µ—Ä, –≤–æ–ª–Ω—ã, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –æ—Å–∞–¥–∫–∏, –¥–∞–≤–ª–µ–Ω–∏–µ
- [x] –°–æ–∑–¥–∞—Ç—å Pydantic –º–æ–¥–µ–ª—å `WeatherData`
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Ç–æ—á–∫–∏

### 4.2 Backend: NOAA/Copernicus - —Ç–µ—á–µ–Ω–∏—è
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `xarray`, `netCDF4`, `siphon`
- [x] –°–æ–∑–¥–∞—Ç—å `services/weather/ocean_currents.py`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `fetch_currents()`:
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ NOAA RTOFS —á–µ—Ä–µ–∑ OPeNDAP
  - –ü–æ–ª—É—á–µ–Ω–∏–µ u, v –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ—á–µ–Ω–∏—è
  - –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –Ω–∞ –Ω—É–∂–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- [x] –°–æ–∑–¥–∞—Ç—å Pydantic –º–æ–¥–µ–ª—å `CurrentsData`
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### 4.3 Backend: Weather Aggregator
- [x] –°–æ–∑–¥–∞—Ç—å `services/weather/aggregator.py`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `get_weather_for_route()`:
  - –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ Open-Meteo + NOAA
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (in-memory –¥–ª—è MVP, –ø–æ—Ç–æ–º Redis)
- [x] –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/weather?lat=...&lon=...&date=...`

---

## –≠–¢–ê–ü 5: Route Calculation - –ø—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º

### 5.1 Backend: Great Circle –º–∞—Ä—à—Ä—É—Ç
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `geopy`
- [x] –°–æ–∑–¥–∞—Ç—å `services/route/calculator.py`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `SimpleRouteCalculator`:
  - –ú–µ—Ç–æ–¥ `great_circle_route()` - –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 15-20 waypoints –º–µ–∂–¥—É A –∏ B
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç –±–∞–∑–æ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

### 5.2 Backend: –ò–∑–±–µ–≥–∞–Ω–∏–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–π –ø–æ–≥–æ–¥—ã
- [x] –í `SimpleRouteCalculator` –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `avoid_extreme_weather()`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ waypoint –Ω–∞ –æ–ø–∞—Å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
  - –ü–æ—Ä–æ–≥–∏: –≤–µ—Ç–µ—Ä > 30 —É–∑–ª–æ–≤, –≤–æ–ª–Ω—ã > 5 –º–µ—Ç—Ä–æ–≤
  - –°–º–µ—â–µ–Ω–∏–µ waypoint –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ –º–∞—Ä—à—Ä—É—Ç—É (50-100 nm)
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `calculate_weather_penalty()`
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É –º–∞—Ä—à—Ä—É—Ç–∞

### 5.3 Backend: –†–∞—Å—á–µ—Ç ETA –∏ –º–µ—Ç—Ä–∏–∫
- [x] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `calculate_route_metrics()`:
  - ETA –¥–ª—è –∫–∞–∂–¥–æ–≥–æ waypoint (—Å–∫–æ—Ä–æ—Å—Ç—å —Å—É–¥–Ω–∞ ~15 —É–∑–ª–æ–≤)
  - –û–±—â–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è (nautical miles)
  - –û–±—â–µ–µ –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏ (—á–∞—Å—ã)
- [x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `RouteResponse` —Å waypoints
- [x] –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/route/calculate`

### 5.4 Backend: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–≥–æ–¥—ã –≤ –º–∞—Ä—à—Ä—É—Ç
- [x] –î–ª—è –∫–∞–∂–¥–æ–≥–æ waypoint –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ ETA
- [x] –î–æ–±–∞–≤–∏—Ç—å weather –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞–∂–¥—ã–π waypoint
- [x] –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å warnings (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è):
  - "High waves expected at WP5"
  - "Strong wind at WP12"
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π flow —á–µ—Ä–µ–∑ API

---

## –≠–¢–ê–ü 6: Frontend - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞

### 6.1 API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞
- [x] –°–æ–∑–¥–∞—Ç—å `services/routeApi.ts`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `calculateRoute(start, end, departureTime)`
- [x] –°–æ–∑–¥–∞—Ç—å TypeScript —Ç–∏–ø—ã –¥–ª—è `Route`, `Waypoint`, `WeatherData`

### 6.2 –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
- [x] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RouteLayer.tsx`
- [x] –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –ª–∏–Ω–∏—é –º–∞—Ä—à—Ä—É—Ç–∞ (Leaflet Polyline)
- [x] –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å waypoints (—Ç–æ—á–∫–∏) –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ
- [x] –î–æ–±–∞–≤–∏—Ç—å popup –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ waypoint:
  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
  - ETA
  - –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- [x] –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ (—Ü–≤–µ—Ç, —Ç–æ–ª—â–∏–Ω–∞)

### 6.3 –ü–∞–Ω–µ–ª—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –º–∞—Ä—à—Ä—É—Ç–µ
- [x] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RouteMetrics.tsx`:
  - –û–±—â–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è
  - ETA (–≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è)
  - –í—Ä–µ–º—è –≤ –ø—É—Ç–∏
- [x] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `WeatherWarnings.tsx`:
  - –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
  - –ò–∫–æ–Ω–∫–∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å –≤ –ª–µ–≤—É—é –ø–∞–Ω–µ–ª—å (–∫–∞–∫ –≤ StormGeo)

### 6.4 –¢–∞–±–ª–∏—Ü–∞ waypoints
- [x] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `WaypointsTable.tsx`
- [x] –ö–æ–ª–æ–Ω–∫–∏:
  - #, Coordinates, ETA, Wind, Waves, Currents, Distance
- [x] Responsive —Ç–∞–±–ª–∏—Ü–∞ (scroll)
- [x] –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ (–∫–∞–∫ –≤ StormGeo)

---

## –≠–¢–ê–ü 7: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–≥–æ–¥—ã - —Å–ª–æ–∏

### 7.1 Backend: API –¥–ª—è —Å–ª–æ–µ–≤ –ø–æ–≥–æ–¥—ã
- [x] –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/weather/layer`:
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `type` (wind/waves/currents), `bbox`, `timestamp`
  - –í–æ–∑–≤—Ä–∞—Ç: GeoJSON –∏–ª–∏ grid –¥–∞–Ω–Ω—ã—Ö
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±–ª–∞—Å—Ç–∏ –∫–∞—Ä—Ç—ã (–Ω–µ —Ç–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç)
- [x] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: downsample –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 7.2 Frontend: Deck.gl –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `deck.gl`, `@deck.gl/react`
- [x] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π `DeckGLOverlay` –¥–ª—è Leaflet
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Leaflet + Deck.gl
- [x] –¢–µ—Å—Ç–æ–≤—ã–π —Å–ª–æ–π (ScatterplotLayer, LineLayer)

### 7.3 –°–ª–æ–π –≤–µ—Ç—Ä–∞ (particle animation)
- [x] –°–æ–∑–¥–∞—Ç—å `WindLayer.tsx` —Å Deck.gl
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–µ—Ç—Ä–∞:
  - –°—Ç—Ä–µ–ª–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
  - –¶–≤–µ—Ç = –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å (—Å–∏–Ω–∏–π ‚Üí –∑–µ–ª–µ–Ω—ã–π ‚Üí –∂–µ–ª—Ç—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π)
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤–µ—Ç—Ä–∞ —Å backend
- [x] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (WebGL —á–µ—Ä–µ–∑ deck.gl)

### 7.4 –°–ª–æ–π –≤–æ–ª–Ω (heatmap)
- [x] –°–æ–∑–¥–∞—Ç—å `WavesLayer.tsx`
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Deck.gl HeatmapLayer –∏ ScatterplotLayer
- [x] –¶–≤–µ—Ç–æ–≤–∞—è —à–∫–∞–ª–∞: —Å–∏–Ω–∏–π (–Ω–∏–∑–∫–∏–µ) ‚Üí –∫—Ä–∞—Å–Ω—ã–π (–≤—ã—Å–æ–∫–∏–µ)
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ–ª–Ω —Å backend
- [x] Hover –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 7.5 –°–ª–æ–π —Ç–µ—á–µ–Ω–∏–π (vector field)
- [x] –°–æ–∑–¥–∞—Ç—å `CurrentsLayer.tsx`
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Deck.gl LineLayer –¥–ª—è —Å—Ç—Ä–µ–ª–æ–∫
- [x] –°—Ç—Ä–µ–ª–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Ç–µ—á–µ–Ω–∏—è
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ—á–µ–Ω–∏–π —Å backend
- [x] –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏

### 7.6 –°–ª–æ–∏ –æ—Å–∞–¥–∫–æ–≤ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- [x] Backend –ø–æ–¥–¥–µ—Ä–∂–∫–∞ temperature layer (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP)
- [ ] –°–æ–∑–¥–∞—Ç—å `PrecipitationLayer.tsx` (–æ—Ç–ª–æ–∂–µ–Ω–æ)
- [ ] Heatmap –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–æ—Ç–ª–æ–∂–µ–Ω–æ)

---

## –≠–¢–ê–ü 8: UI Controls - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–ª–æ–µ–≤

### 8.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ—è–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `WeatherControls.tsx`
- [ ] –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è:
  - ‚òë Wind (animated)
  - ‚òê Waves (height)
  - ‚òê Currents (vectors)
  - ‚òê Precipitation
  - ‚òê Temperature
- [ ] –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–µ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- [ ] –ö–Ω–æ–ø–∫–∞ "Show All" / "Hide All"
- [ ] –°–ª–∞–π–¥–µ—Ä—ã opacity –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è

### 8.2 –¢–æ–ø-–±–∞—Ä —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–∫–∞–∫ StormGeo)
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `WeatherTopBar.tsx`
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö —É—Å–ª–æ–≤–∏–π:
  - Pressure: XXX hPa
  - Wind: XX.X kts
  - Sig Waves: X.XX m
  - Swell: X.XX m
- [ ] Toggle "Show weather"
- [ ] –î–∞—Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞

### 8.3 Time Slider - –≤—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TimeSlider.tsx`
- [ ] –°–ª–∞–π–¥–µ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏ (–æ—Ç —Å–µ–π—á–∞—Å –¥–æ +7 –¥–Ω–µ–π)
- [ ] –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–≥–æ–¥–Ω—ã—Ö —Å–ª–æ–µ–≤
- [ ] –ö–Ω–æ–ø–∫–∞ Play –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### 8.4 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Grid API)
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `_fetch_wind_layer()` –≤ `aggregator.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è batch –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `_fetch_waves_layer()` –¥–ª—è batch –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `_fetch_currents_layer()` –¥–ª—è batch –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å batch –∑–∞–ø—Ä–æ—Å –∫ Open-Meteo Marine API:
  - –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—É—é —Å–µ—Ç–∫—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (lat[], lng[])
  - –î–µ–ª–∞—Ç—å –û–î–ò–ù –∑–∞–ø—Ä–æ—Å —Å –º–∞—Å—Å–∏–≤–æ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–¥–æ 100 —Ç–æ—á–µ–∫)
  - –ü–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä—è–¥–∞–º–∏
  - –ò–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ timestamp
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π:
  - –†–∞–∑–±–∏–≤–∞—Ç—å –Ω–∞ –±–∞—Ç—á–∏ –ø–æ 100 —Ç–æ—á–µ–∫
  - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –±–∞—Ç—á–µ–π (asyncio.gather)
  - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
  - Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è failed requests
  - Fallback –Ω–∞ –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –±–∞—Ç—á–µ–π
  - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ–π –∫–∞—Ä—Ç—ã
  - –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 5 —Å–µ–∫ –¥–ª—è –≤—Å–µ–≥–æ –º–∏—Ä–∞)
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã API (10,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# Open-Meteo Marine API endpoint
url = "https://marine-api.open-meteo.com/v1/marine"

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã batch –∑–∞–ø—Ä–æ—Å–∞
params = {
    "latitude": [lat1, lat2, lat3, ...],  # –º–∞—Å—Å–∏–≤ –¥–æ 100 —Ç–æ—á–µ–∫
    "longitude": [lng1, lng2, lng3, ...],
    "hourly": ["wind_speed_10m", "wind_direction_10m", "wave_height", "wave_direction"],
    "start_date": "2025-10-17",
    "end_date": "2025-10-24"
}

# –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Ç–æ—á–µ–∫ –∏ –≤—Å–µ—Ö —á–∞—Å–æ–≤
response = {
    "latitude": [52.52, 48.85, ...],
    "longitude": [13.41, 2.35, ...],
    "hourly": {
        "time": ["2025-10-17T00:00", "2025-10-17T01:00", ...],
        "wind_speed_10m": [[12.5, 13.1, ...], [11.2, 12.8, ...], ...],  # [—Ç–æ—á–∫–∞][–≤—Ä–µ–º—è]
        "wave_height": [[2.1, 2.3, ...], [1.8, 2.0, ...], ...]
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° –í 100-1000 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ (1 –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ 1000)
- üåç –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ–π –∫–∞—Ä—Ç—ã
- üí∞ –≠–∫–æ–Ω–æ–º–∏—è –ª–∏–º–∏—Ç–æ–≤ API
- üìä –ü–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã (–ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7 –¥–Ω–µ–π)
- üîÑ –ú–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤

### 8.5 –£–ª—É—á—à–µ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–æ–π (Rolling Window Cache) ‚úÖ

**–¶–µ–ª—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ API –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—É—Ç–µ–º —É–º–Ω–æ–≥–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–¥–∞–ª–µ–Ω–∏–µ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–Ω–µ–π.

#### Backend: –£–ª—É—á—à–µ–Ω–Ω—ã–π WeatherCache

- [x] –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å `WeatherCache` –∫–ª–∞—Å—Å –≤ `aggregator.py`:
  - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–µ—à–∞ —Å TTL –Ω–∞ –¥–Ω–µ–≤–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
  - –•—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º: `{date: {coordinates: weather_data}}`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–Ω–µ–π
  
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã Smart Cache:
  ```python
  class SmartWeatherCache:
      def __init__(self, max_days_ahead: int = 7):
          """
          –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–º–Ω–æ–≥–æ –∫–µ—à–∞
          
          Args:
              max_days_ahead: –ú–∞–∫—Å–∏–º—É–º –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)
          """
          self._cache: Dict[date, Dict[tuple, List[WeatherPoint]]] = {}
          self._max_days_ahead = max_days_ahead
          self._last_cleanup = datetime.utcnow()
      
      def get(self, coordinates: tuple, timestamp: datetime) -> Optional[List[WeatherPoint]]:
          """–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏"""
          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–Ω—è
          # –í–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–µ—à–∞ –∏–ª–∏ None
      
      def set(self, coordinates: tuple, timestamp: datetime, data: List[WeatherPoint]):
          """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ"""
          # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–∞—Ç–µ
          # –í—ã–∑–≤–∞—Ç—å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫—É
      
      def _cleanup_old_days(self):
          """–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø—Ä–æ—à–µ–¥—à–∏–µ –¥–Ω–∏"""
          # –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–Ω–∏ –¥–æ —Å–µ–≥–æ–¥–Ω—è
          # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã
      
      def _is_date_valid(self, date: date) -> bool:
          """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –¥–∞—Ç–∞ –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –æ–∫–Ω–µ"""
          # –ü—Ä–æ–≤–µ—Ä–∫–∞: today <= date <= today + max_days_ahead
      
      def get_cache_stats(self) -> dict:
          """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–µ—à–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"""
          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–π
          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
          # –†–∞–∑–º–µ—Ä –≤ –ø–∞–º—è—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  ```

- [ ] –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –≤ `_fetch_wind_layer()` –∏ `_fetch_waves_layer()`:
  - –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ 7 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥ (–≤–º–µ—Å—Ç–æ 1 –¥–Ω—è)
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π SmartWeatherCache
  - –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–µ—à –ø–æ –¥–Ω—è–º
  
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ API –∑–∞–ø—Ä–æ—Å–∞–º–∏:
  ```python
  async def get_weather_layer_data(self, layer_type, bbox, timestamp, resolution):
      # 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ –¥–Ω—è
      date = timestamp.date()
      cached_data = self.smart_cache.get_day_data(date, bbox)
      
      if cached_data:
          logger.info(f"‚úÖ Cache HIT for {date}")
          return self._extract_timestamp_data(cached_data, timestamp)
      
      # 2. –ï—Å–ª–∏ –Ω–µ—Ç - –∑–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–∞ 7 –¥–Ω–µ–π
      logger.info(f"‚¨áÔ∏è Cache MISS, fetching 7 days starting {date}")
      start_date = timestamp.replace(hour=0, minute=0, second=0)
      end_date = start_date + timedelta(days=7)
      
      # 3. Batch –∑–∞–ø—Ä–æ—Å
      batch_results = await self.open_meteo.fetch_marine_weather_batch(
          coordinates, start_date, end_date
      )
      
      # 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–µ—à –ø–æ –¥–Ω—è–º
      self.smart_cache.set_multi_day(batch_results)
      
      # 5. –í–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ timestamp
      return self._extract_timestamp_data(batch_results, timestamp)
  ```

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –æ—á–∏—Å—Ç–∫–∏:
  ```python
  async def schedule_cache_cleanup(self):
      """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ (–∫–∞–∂–¥—ã–π —á–∞—Å)"""
      while True:
          await asyncio.sleep(3600)  # 1 —á–∞—Å
          self.smart_cache.cleanup_old_days()
          logger.info(f"üßπ Scheduled cache cleanup completed")
  ```

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–µ—à–∞:
  - Endpoint `GET /api/cache/stats` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–µ—à–∞
  - –ú–µ—Ç—Ä–∏–∫–∏: hit rate, miss rate, —Ä–∞–∑–º–µ—Ä

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –∫–ª—é—á–∏ –∫–µ—à–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
  ```python
  # –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç:
  cache_key = f"{lat}_{lng}_{start_date}_{end_date}"
  
  # –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:
  cache_key = (date, (lat, lng))  # Tuple –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ lookup
  
  # –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
  cache = {
      date(2025, 10, 17): {
          (52.5, 13.4): [WeatherPoint(...), ...],  # 24-168 —á–∞—Å–æ–≤ –¥–∞–Ω–Ω—ã—Ö
          (51.5, -0.1): [WeatherPoint(...), ...],
          ...
      },
      date(2025, 10, 18): { ... },
      ...
  }
  ```

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è production):
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pickle –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  - –°–∂–∏–º–∞—Ç—å gzip –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
  - Lazy loading –¥–ª—è –±–æ–ª—å—à–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤

#### Persistence (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è v2)

- [ ] –î–ª—è production: Redis –∏–ª–∏ —Ñ–∞–π–ª–æ–≤—ã–π –∫–µ—à
  ```python
  class PersistentWeatherCache(SmartWeatherCache):
      """–ö–µ—à —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞ –¥–∏—Å–∫/Redis"""
      
      def __init__(self, storage_type='redis'):
          if storage_type == 'redis':
              self.redis_client = redis.Redis(host='localhost', port=6379)
          elif storage_type == 'file':
              self.cache_dir = Path('./cache/weather')
              self.cache_dir.mkdir(exist_ok=True)
      
      def save_to_storage(self, date, data):
          """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–µ–Ω—å –Ω–∞ –¥–∏—Å–∫/Redis"""
          # Pickle + gzip —Å–∂–∞—Ç–∏–µ
          # –ó–∞–ø–∏—Å–∞—Ç—å –≤ Redis –∏–ª–∏ —Ñ–∞–π–ª
      
      def load_from_storage(self, date):
          """–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ–Ω—å –∏–∑ storage"""
          # –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑ Redis/—Ñ–∞–π–ª–∞
          # –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏ deserialize
  ```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  ```python
  logger.info(f"üì• Loading weather data for {date}")
  logger.info(f"‚úÖ Cache HIT: {date}, points: {len(data)}")
  logger.info(f"‚ùå Cache MISS: {date}, fetching from API")
  logger.info(f"üóëÔ∏è Cleanup: Removed {len(removed)} expired days: {removed}")
  logger.info(f"üìä Cache stats: {stats['days']} days, {stats['points']} points")
  ```

- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ cache hits/misses
  - –†–∞–∑–º–µ—Ä –∫–µ—à–∞ –≤ MB
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∑–∞–ø—Ä–æ—Å–æ–≤ —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ
  - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å –∫–µ—à–µ–º vs –±–µ–∑ –∫–µ—à–∞

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è SmartWeatherCache:
  ```python
  def test_cache_hit_same_day():
      """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–æ–≥–æ –∂–µ –¥–Ω—è"""
  
  def test_cache_miss_new_day():
      """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å API –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–Ω—è"""
  
  def test_cleanup_old_days():
      """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–Ω–µ–π"""
  
  def test_rolling_window():
      """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–∫–Ω–æ 7 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥"""
  
  def test_date_validation():
      """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞—Ç"""
  ```

- [ ] Integration —Ç–µ—Å—Ç—ã:
  - –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –Ω–µ–¥–µ–ª—é
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –∏–∑ –∫–µ—à–∞
  - –ù–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫—É
  - –ò–∑–º–µ—Ä–∏—Ç—å —ç–∫–æ–Ω–æ–º–∏—é API –∑–∞–ø—Ä–æ—Å–æ–≤

#### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- –ó–∞–ø—Ä–æ—Å –Ω–∞ –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ timestamp
- –ö–µ—à TTL = 1 —á–∞—Å (—Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π)
- –ù–µ—Ç –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏ –ø–∞–º—è—Ç–∏
- ~100 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ 7 –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö
- –£–º–Ω—ã–π –∫–µ—à –ø–æ –¥–Ω—è–º —Å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–æ–π
- –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ (—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–Ω–µ–π)
- ~15-20 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ Cache hit rate > 90%
- ‚úÖ API –∑–∞–ø—Ä–æ—Å—ã < 50/–¥–µ–Ω—å –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –†–∞–∑–º–µ—Ä –∫–µ—à–∞ < 100 MB
- ‚úÖ –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å –∫–µ—à–µ–º < 50ms

---

## –≠–¢–ê–ü 9: –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å (Routes Panel) - –∫–∞–∫ StormGeo

### 9.1 –°–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RoutesPanel.tsx`
- [ ] –°–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–¥–ª—è MVP - –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π)
- [ ] –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Ä—à—Ä—É—Ç–µ:
  - –ù–∞–∑–≤–∞–Ω–∏–µ (Start ‚Üí End)
  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞
  - ETD/ETA
  - –î–∏—Å—Ç–∞–Ω—Ü–∏—è
- [ ] –ö–Ω–æ–ø–∫–∏:
  - "Create New Route"
  - "Optimize" (placeholder –¥–ª—è –±—É–¥—É—â–µ–≥–æ)

### 9.2 –î–µ—Ç–∞–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∞
- [ ] –°–µ–∫—Ü–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
  - Sailing time
  - Consumption (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP)
  - Distance
- [ ] Toggle "Edit route on map" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP)

### 9.3 –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –ø–∞–Ω–µ–ª–∏
- [ ] –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–∫–∞–∫ StormGeo)
- [ ] Collapsible –ø–∞–Ω–µ–ª—å (–º–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å)
- [ ] Responsive –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (drawer)

---

## –≠–¢–ê–ü 10: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UI/UX

### 10.1 –û–±—â–∏–π –¥–∏–∑–∞–π–Ω
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–µ–º–Ω—É—é —Ç–µ–º—É –∫–æ –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- [ ] –ï–¥–∏–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ (—Å–∏–Ω–∏–µ, —Å–µ—Ä—ã–µ —Ç–æ–Ω–∞)
- [ ] –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –∏ —Ä–∞–∑–º–µ—Ä—ã
- [ ] –ò–∫–æ–Ω–∫–∏ (react-icons –∏–ª–∏ heroicons)

### 10.2 Loading states
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏–Ω–Ω–µ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–∞—Ä—à—Ä—É—Ç–∞
- [ ] –°–∫–µ–ª–µ—Ç–æ–Ω—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã waypoints
- [ ] Progress bar –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 10.3 Error handling
- [ ] Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ—à–∏–±–æ–∫
- [ ] Fallback UI –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

### 10.4 –ê–Ω–∏–º–∞—Ü–∏–∏
- [ ] –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- [ ] –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
- [ ] Smooth zoom –∫ –º–∞—Ä—à—Ä—É—Ç—É –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞

---

## –≠–¢–ê–ü 11: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ production-ready

### 11.1 Backend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (loguru)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (try/except, HTTP exceptions)
- [ ] Rate limiting –¥–ª—è API (slowapi)
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è frontend
- [ ] Environment variables (.env —Ñ–∞–π–ª)

### 11.2 Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] Code splitting (React.lazy)
- [ ] –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (React.memo)
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤
- [ ] Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ –ª–æ–∫–∞—Ü–∏–π
- [ ] Lazy loading –ø–æ–≥–æ–¥–Ω—ã—Ö —Å–ª–æ–µ–≤

### 11.3 –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Backend: –∫–µ—à –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ (in-memory –∏–ª–∏ Redis)
- [ ] Frontend: React Query –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] Service Worker –¥–ª—è offline (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 11.4 Environment setup
- [ ] `.env.example` —Ñ–∞–π–ª—ã –¥–ª—è backend –∏ frontend
- [ ] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é API –∫–ª—é—á–µ–π:
  - Mapbox
  - Open-Meteo (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
  - NOAA/Copernicus (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)

---

## –≠–¢–ê–ü 12: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 12.1 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ backend
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è route calculator (pytest)
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è weather API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è geocoding
- [ ] –ú–∏–Ω–∏–º—É–º 60% coverage

### 12.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ frontend
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç (vitest)
- [ ] Component —Ç–µ—Å—Ç—ã (React Testing Library) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- [ ] E2E —Ç–µ—Å—Ç—ã (Playwright) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP

### 12.3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] README.md —Å:
  - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
  - –°–∫—Ä–∏–Ω—à–æ—Ç—ã
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
  - –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è FastAPI)
- [ ] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

---

## –≠–¢–ê–ü 13: –î–µ–ø–ª–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –¥–µ–º–æ)

### 13.1 Docker production build
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Dockerfile (multi-stage)
- [ ] docker-compose –¥–ª—è production
- [ ] Nginx –¥–ª—è reverse proxy

### 13.2 Cloud –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤)
- [ ] Frontend ‚Üí Vercel –∏–ª–∏ Netlify
- [ ] Backend ‚Üí Railway, Render –∏–ª–∏ AWS
- [ ] Environment variables –≤ cloud
- [ ] Custom domain (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)

```
shipsradar/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # FastAPI app
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ location.py           # Geocoding endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route.py              # Route calculation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ weather.py            # Weather data
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculator.py     # SimpleRouteCalculator (MVP)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ interface.py      # Abstract class –¥–ª—è –±—É–¥—É—â–µ–≥–æ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ weather/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ open_meteo.py     # Wind, waves, weather
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ocean_currents.py # NOAA/Copernicus
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ aggregator.py     # Unified weather data
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ location.py           # Pydantic models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ weather.py
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Map/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MapView.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RouteLayer.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WeatherLayers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ WindLayer.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ WavesLayer.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CurrentsLayer.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RouteInput/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LocationInput.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DateTimePicker.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoutePanel/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoutesPanel.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RouteMetrics.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WeatherWarnings.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WaypointsTable.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WeatherControls.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WeatherTopBar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TimeSlider.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routeApi.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weatherApi.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ geocodingApi.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ README.md
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ MVP

- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ —Ç–æ—á–∫–∏ A –∏ B (–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–æ–∏—Ç –º–∞—Ä—à—Ä—É—Ç —Å 15-20 waypoints
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç —É—á–∏—Ç—ã–≤–∞–µ—Ç —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—É—é –ø–æ–≥–æ–¥—É (–∏–∑–±–µ–≥–∞–µ—Ç —à—Ç–æ—Ä–º—ã)
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ 7 –¥–Ω–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ waypoint
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ª–æ–µ–≤: –≤–µ—Ç–µ—Ä (–∞–Ω–∏–º–∞—Ü–∏—è), –≤–æ–ª–Ω—ã, —Ç–µ—á–µ–Ω–∏—è
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ waypoints
- ‚úÖ ETA –∏ –º–µ—Ç—Ä–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞
- ‚úÖ UI –ø–æ—Ö–æ–∂ –Ω–∞ StormGeo (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Docker

---

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (v2.0+)

- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º A* –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
- –£—á–µ—Ç —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–ø–ª–∏–≤–∞
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å—É–¥–æ–≤
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ (drag waypoints)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –ë–î
- AIS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Ä–µ–∞–ª—å–Ω—ã–µ —Å—É–¥–∞)
- –≠–∫—Å–ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç—ã (GPX, KML)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã
- ML –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **–≠—Ç–∞–ø—ã 1-3:** 2-3 –¥–Ω—è (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–∞—Ä—Ç–∞, –≤–≤–æ–¥ —Ç–æ—á–µ–∫)
- **–≠—Ç–∞–ø—ã 4-6:** 3-4 –¥–Ω—è (–ø–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ä–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- **–≠—Ç–∞–ø—ã 7-8:** 4-5 –¥–Ω–µ–π (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–µ–≤, controls)
- **–≠—Ç–∞–ø—ã 9-10:** 2-3 –¥–Ω—è (UI panels, –ø–æ–ª–∏—Ä–æ–≤–∫–∞)
- **–≠—Ç–∞–ø—ã 11-13:** 2-3 –¥–Ω—è (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, —Ç–µ—Å—Ç—ã, –¥–µ–ø–ª–æ–π)

**–ò—Ç–æ–≥–æ: 13-18 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** (1 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ full-time)

–î–ª—è –∫–æ–º–∞–Ω–¥—ã –∏–∑ 2 —á–µ–ª–æ–≤–µ–∫ (frontend + backend –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ): **~10-12 –¥–Ω–µ–π**

